<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <title>Register Page | Simple - Responsive Bootstrap 4 Admin Dashboard</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta content="Responsive bootstrap 4 admin template" name="description" />
        <meta content="Coderthemes" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <!-- App favicon -->
        <link rel="shortcut icon" href="assets/images/favicon.ico">
        <!-- App css -->
        <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bootstrap-stylesheet" />
        <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" id="app-stylesheet" />

    </head>

    <body>
        <div class="account-pages my-5 pt-5">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-8 col-lg-6">
                        <div class="card">
                            <div class="card-body">
                                <div class="text-center mb-4 mt-3">
                                    <a href="index.html">
                                        <span><img src="assets/images/logo-dark.png" alt="" height="30"></span>
                                    </a>
                                </div>
                                <form class="p-2">
                                    <div class="form-group">
                                        <label for="username">用户名</label>
                                        <input class="form-control" type="text" id="username" required="" placeholder="周荣昊">
                                    </div>
                                    <div class="form-group">
                                        <label for="emailaddress">邮箱</label>
                                        <input class="form-control" type="email" id="emailaddress" required="" placeholder="1728xxxx@bjtu.edu.cn">
                                    </div>
                                    <div class="form-group">
                                        <label for="password">密码</label>
                                        <input class="form-control" type="password" required="" id="password" placeholder="Enter your password">
                                    </div>
                                    <div class="mb-3 text-center">
                                        <button class="btn btn-primary btn-block"  id="regBtn"> 注册 </button>
                                    </div>
                                </form>
                            </div>
                            <!-- end card-body -->
                        </div>
                        <!-- end card -->

                        <div class="row mt-4">
                            <div class="col-sm-12 text-center">
                                <p class="text-muted mb-0">已有账号? <a href="pages-login.html" class="text-dark ml-1"><b>登录</b></a></p>
                            </div>
                        </div>

                    </div>
                    <!-- end col -->
                </div>
                <!-- end row -->
            </div>
            <!-- end container -->
        </div>
        <!-- end page -->

        <!-- Vendor js -->
        <script src="assets/js/vendor.min.js"></script>

        <!-- App js -->
        <script src="assets/js/app.min.js"></script>

    </body>
    <script type="text/javascript">
        document.getElementById('regBtn').onclick = function() {
            var input_username = document.getElementById("username").value;
            var input_emailaddress = document.getElementById("emailaddress").value;
            var input_password = document.getElementById("password").value;
            // ajax提交用户名+邮箱+密码到后台程序
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "registerRecv.php");
            xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xhr.send("username="+input_username+"&emailaddress="+input_emailaddress+"&password="+input_password);
            xhr.onreadystatechange = function() {
                if(xhr.readyState==4 && xhr.status==200) {
                    var res = xhr.responseText;
                    // 后台响应成功则跳转到登录页面
                    if(res=="register success") {
                        alert("注册成功");
                        window.location.href = "index.html";
                    }
                    else {
                        alert(res);
                    }
                }
            }
        }
    </script>

</html>